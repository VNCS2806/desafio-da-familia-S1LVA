# desafio-da-familia-S1LVA
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Missão da Semana - Game Familiar</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { text-align: center; }
    table, input, button, select { font-size: 14px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #f4f4f4; }
    input, select, button { padding: 5px; margin: 5px 0; }
    .controls, #searchInput { margin-bottom: 20px; }
    #mainContent { display: none; }
    .deleteBtn, #resetBtn { cursor: pointer; }
    .deleteBtn { background-color: #e74c3c; color: #fff; border: none; padding: 4px 8px; }
    .deleteBtn:hover { background-color: #c0392b; }
    #resetBtn { background-color: #3498db; color: white; border: none; padding: 8px 12px; }
    #resetBtn:hover { background-color: #2980b9; }
  </style>
</head>
<body>
  <div id="loginArea">
    <h2>Login com GitHub</h2>
    <button id="githubLoginBtn">Entrar com GitHub</button>
  </div>

  <div id="mainContent">
    <div id="userInfo"></div>
    <h1>Missão da Semana - Game Familiar</h1>

    <div class="controls">
      <label>Jogador:
        <select id="playerSelect">
          <option value="Alan">Alan</option>
          <option value="Daniela">Daniela</option>
          <option value="Vinicius">Vinicius</option>
          <option value="Alani">Alani</option>
        </select>
      </label>
      <label>Pontos:
        <select id="pointSelect"></select>
      </label>
      <button onclick="addEntry()">Adicionar Pontos</button>
      <button onclick="showSummary()">Resumo Semanal</button>
      <button id="resetBtn" onclick="resetEntries()">Zerar Pontuação Geral</button>
    </div>

    <input type="text" id="searchInput" placeholder="Pesquisar tarefa..." onkeyup="searchTasks()" />

    <table id="entriesTable">
      <thead>
        <tr>
          <th>#</th>
          <th>Jogador</th>
          <th>Pontos</th>
          <th>Data/Hora</th>
          <th>Adicionado por</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody id="entries"></tbody>
    </table>

    <div id="summary"></div>

    <h3>Tarefas Sugeridas</h3>
    <table>
      <thead><tr><th>#</th><th>Descrição</th></tr></thead>
      <tbody id="taskList"></tbody>
    </table>
  </div>

  <script>
    let entries = JSON.parse(localStorage.getItem('entries')) || [];
    let idCounter = entries.length ? Math.max(...entries.map(e => e.id)) + 1 : 1;
    let loggedUser = localStorage.getItem('loggedUser');

    const loginArea = document.getElementById('loginArea');
    const mainContent = document.getElementById('mainContent');
    const userInfo = document.getElementById('userInfo');
    const pointSelect = document.getElementById('pointSelect');

    for (let i = -50; i <= 50; i++) {
      if (i !== 0) {
        const opt = document.createElement('option');
        opt.value = i;
        opt.textContent = i;
        pointSelect.appendChild(opt);
      }
    }

    function renderEntries() {
      const tbody = document.getElementById('entries');
      tbody.innerHTML = '';
      entries.forEach(e => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${e.id}</td>
          <td>${e.player}</td>
          <td>${e.points}</td>
          <td>${e.timestamp}</td>
          <td>${e.addedBy}</td>
          <td>${e.addedBy === loggedUser ? '<button class="deleteBtn" onclick="deleteEntry(' + e.id + ')">Excluir</button>' : ''}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function addEntry() {
      const player = document.getElementById('playerSelect').value;
      const points = parseInt(pointSelect.value);
      const timestamp = new Date().toLocaleString();
      const newEntry = {
        id: idCounter++, player, points, timestamp, addedBy: loggedUser
      };
      entries.push(newEntry);
      saveEntries();
    }

    function deleteEntry(id) {
      const entry = entries.find(e => e.id === id);
      if (entry.addedBy !== loggedUser) return alert('Só pode excluir suas próprias entradas.');
      entries = entries.filter(e => e.id !== id);
      saveEntries();
    }

    function saveEntries() {
      localStorage.setItem('entries', JSON.stringify(entries));
      renderEntries();
    }

    function showSummary() {
      const summaryDiv = document.getElementById('summary');
      const total = entries.reduce((acc, e) => {
        acc[e.player] = (acc[e.player] || 0) + e.points;
        return acc;
      }, {});
      const metas = { Alan: 300, Daniela: 300, Vinicius: 300, Alani: 200 };
      summaryDiv.innerHTML = Object.keys(metas).map(p => `${p}: ${total[p] || 0} / ${metas[p]}`).join('<br>');
    }

    function resetEntries() {
      if (confirm('Zerar todos os dados?')) {
        entries = [];
        idCounter = 1;
        saveEntries();
        document.getElementById('summary').innerHTML = '';
      }
    }

    document.getElementById('githubLoginBtn').onclick = () => {
      const username = prompt('Digite seu nome de usuário do GitHub:');
      if (username) {
        loggedUser = username.trim();
        localStorage.setItem('loggedUser', loggedUser);
        showMain();
      }
    };

    function logout() {
      localStorage.removeItem('loggedUser');
      loggedUser = null;
      location.reload();
    }

    function showMain() {
      loginArea.style.display = 'none';
      mainContent.style.display = 'block';
      userInfo.innerHTML = `Logado como <b>${loggedUser}</b> <button onclick="logout()">Logout</button>`;
      renderEntries();
    }

    // Carregar tarefas sugeridas
    const taskList = document.getElementById('taskList');
    for (let i = 1; i <= 400; i++) {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${i}</td><td>Tarefa número ${i}</td>`;
      taskList.appendChild(tr);
    }

    function searchTasks() {
      const filter = document.getElementById('searchInput').value.toLowerCase();
      const rows = taskList.getElementsByTagName('tr');
      Array.from(rows).forEach(row => {
        const text = row.innerText.toLowerCase();
        row.style.display = text.includes(filter) ? '' : 'none';
      });
    }

    // Se já estiver logado
    if (loggedUser) showMain();
  </script>
</body>
</html>
